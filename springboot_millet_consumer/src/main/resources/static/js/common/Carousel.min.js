/*首页轮播图*/
function Carousel(){
	this.imgList = $($(".imgList li").toArray().reverse());
	this.sliderLen = this.imgList.length;
	this.time = 3000;
	this.curIndex=0;
	var _this = this;
	this.timer = setInterval(function() {
		_this.curIndex++;
		_this.changePic();
	},this.time);
	this.left = $('.prevPic');
	this.left.on('click',function(){
		_this.curIndex--;
		_this.changePic();
	});
	this.right = $('.nextPic');
	this.right.on('click',function(){
		_this.curIndex++;
		_this.changePic();
	})
	this.init = function(){
	  //对右下角按钮index进行事件绑定处理等
	  $(".picOrder").find("i").each(function(item){ 
	    $(this).hover(function(){ 
	      clearInterval(_this.timer);
	      _this.curIndex = item;
	      _this.changePic();
	      $(this).addClass('roundTab-on').siblings('.roundTab')
	      	.removeClass('roundTab-on');
	    },function(){ 
	      _this.autoChangeAgain();
	    });
	  });
		//左箭头滑入滑出事件处理
	  this.left.hover(function(){ 
	    //滑入清除定时器
	    clearInterval(_this.timer);
	  },function(){ 
	    //滑出则重置定时器
	    _this.autoChangeAgain();
	  });
	  //右箭头滑入滑出事件处理
	  this.right.hover(function(){ 
	    //滑入清除定时器
	    clearInterval(_this.timer);
	  },function(){ 
	    //滑出则重置定时器
	    _this.autoChangeAgain();
	  });
	}
}
//清除定时器时候的重置定时器
Carousel.prototype.autoChangeAgain = function(){
	var _this = this;
  this.timer = setInterval(function(){ 
	  if(_this.curIndex%_this.sliderLen < _this.sliderLen-1){ 
	    _this.curIndex ++;
	  }else{
	    _this.curIndex = 0;
	  }
		//调用变换处理函数
	  _this.changePic(); 
	},_this.time);
}
Carousel.prototype.changePic = function(){
	var index = Math.abs(this.curIndex)%this.sliderLen;
	var item = this.imgList[index];
	$(item).fadeIn("slow").siblings().fadeOut("slow");
	$($('.roundTab')[index]).addClass('roundTab-on').siblings('.roundTab')
	  .removeClass('roundTab-on');
}